language: c
compiler:
  - gcc
  - gcc-7
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test # gcc
    packages:
      - gcc-7
      - make


script:
  - make all
  # tests
  - cd tests/external
  - bash test_sender_empfaenger.sh
  - cd ../..
  - make clean freeshm
after_success:
  # coverity
  - cd $TRAVIS_BUILD_DIR
  - if ([ "$CC" == "gcc" ] && [ "$TRAVIS_BRANCH" == "coverity_scan" ]); then
      curl -s "https://scan.coverity.com/scripts/travisci_build_coverity_scan.sh" | bash || true;
    fi
